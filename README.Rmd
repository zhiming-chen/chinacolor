---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "figures/README-",
  out.width = "100%"
)
library(tidyverse)
library(ggpubr)
library(showtext)
showtext_auto()
font_add("simkai",regular = "C:\\Users\\czm\\AppData\\Local\\Microsoft\\Windows\\Fonts\\SourceHanSansSC-Regular.otf")

font_add("STKaiti",regular = "C:\\Users\\czm\\AppData\\Local\\Microsoft\\Windows\\Fonts\\SourceHanSansSC-Regular.otf")
font_add("KaiTi",regular = "C:\\Users\\czm\\AppData\\Local\\Microsoft\\Windows\\Fonts\\SourceHanSansSC-Regular.otf")

devtools::load_all()
```

# chinacolor :Chinese Traditional Colors

<!-- badges: start -->

<!-- badges: end -->

Inspired by the Chinese book Traditional Chinese Colors: The Aesthetics of Colors in the Forbidden City[Chinese Traditional Colors: The Aesthetics of Colors in the Forbidden City](https://baike.baidu.com/item/%E4%B8%AD%E5%9B%BD%E4%BC%A0%E7%BB%9F%E8%89%B2%EF%BC%9A%E6%95%85%E5%AE%AB%E9%87%8C%E7%9A%84%E8%89%B2%E5%BD%A9%E7%BE%8E%E5%AD%A6/56817070), this package was developed. The key information of 384 colors from this book has been compiled into color data, and based on this data:

-   Built-in 20 Sequential, 20 Diverging, and 20 Qualitative color palettes respectively;

-   Built-in 5 ggplot-compatible plotting themes featuring traditional Chinese cultural characteristics;

-   Developed functions for browsing and printing these colors and color palettes, allowing quick access to information about colors and color palettes;

-   Developed tools for customizing color palettes using these colors or built-in color palettes

-   Developed a series of scales functions compatible with ggplot plotting.

-   384 colors fill in circle ordered by HUE with id

![384 colors in circle with id](image/color/all_cirle.png){width="708"}

-   384 in grid ordered by id with group id

![384 colors with group id](image/color/All_Colors_with%20_Group_ID.png)

-   colors for solar term, 24 solar term in a year,16 colors for a solar term, each color has its means.

![colors for solar terms](image/color/colors_by_solar_term/6_谷雨%20Grain%20Rain.png)


-   palette with color from 384 colors

![a palette example](image/palettes/palette_5.png)

## Installation

You can install the package by using the following methods.

```{r eval=FALSE, include=TRUE}
 
devtools::install_github("zhiming-chen/chinacolor")

# or
remotes::install_github("zhiming-chen/chinacolor")
```

## Plot,Preview and Get the Colors

### plot_color_grid print colors 

```{r eval=FALSE, include=TRUE}
plot_color_grid(show_group = T)
```

可以在中查看全部24个节气的颜色系列。

all the colors for 24 solar terms can found in the folder :[colors_by_solar_term](https://github.com/zhiming-chen/chinacolor/tree/master/image/color/colors_by_solar_term) 

### list_colors Preview the colors in Viewer Panel

The `list_colors` function enables quick preview of colors in the Viewer interface of RStudio and allows instant access to color hex values. This feature is helpful when we design color palettes or adjust colors during plotting.

```{r eval=TRUE, include=TRUE}
list_colors()
```

![screen_shot for the preview result ](figures/list_colors.png)

## Palettes:Plot,Preview,Get and Customize

60 color palettes are pre-installed in this package for use. Here are some examples of the palettes:

![](image/palettes/palette_3.png)

![](image/palettes/palette_12.png)

![](image/palettes/palette_17.png)

![](image/palettes/palette_22.png)

![](image/palettes/palette_33.png)

![](image/palettes/palette_37.png)

![](image/palettes/palette_42.png)

![](image/palettes/palette_46.png)

![](image/palettes/palette_59.png)

The built-in color palettes are categorized into three types: sequential, diverging, and qualitative, with 20 palettes for each type.

These color palettes are assigned IDs and named in a regularized way:

-   sequential palettes：

    -   id：1-20

    -   name：seq01-seq20。

-   diverging palettes：

    -   id：21-40

    -   name：div01-div20。

-   qualitative palettes：

    -   id：41-60

    -   name：qual01-qual20。

these names are the element names for palette in the palette_list.


And，for each palette, an embedded list in the palette_list, has its Chinese name and English,so we can get the palette information by put in the id number(index),element name,Chinese name and English name for palette.  

### list_palettes Preview the palettes

The same method as `list_colors` function.

```{r echo=TRUE}

list_palettes()

```

![](figures/list_palettes.png)

You can also get the palettes main info by run this function.

```{r}
palettes_info <- list_palettes()

head(palettes_info,10)
```

### plot_palettes:  Plot Multipule Palettes

Function `plot_palettes` can help us plot multiple palettes in a picture for compare and selection. 

```{r}
#  input the number vector for palettes id or index 
plot_palettes(1:5)

# input the element name for palettes
plot_palettes(c("seq01","div02","qual14","qual18"))
```

### plot_palette:  Plot a Single Palette

Function `plot_palette`works for plot either built_in palettes or custom palettes,you can set the parameters to match you requirement to the plot.

-   plot built_in palettes

```{r}
# input index number in an easy way, show_text default value is FALSE.
plot_palette(x = 43,show_text = T)
```

```{r}
# input the element name,and can also named the palette title/name by your owner words

plot_palette(x = "div13",name = "ONLY FOR PROJECT A!!!")

```

```{r}
# English name of the palette also can work as an input, 

plot_palette(x = "scarlet_flow",show_text = T)
```

```{r}

# Chinese name is available as expected.
plot_palette(x = "绯绿相生",show_text = T)
```



-   plot custom palettes

color vector or named color vector object can be as input.

Chinese name of the color can be plot only in case that all the colors from 384 colors collection. 

```{r}
#  color vector input and named palette tile 
plot_palette(x = c("#99BCAC","#5F4321","#BA5140","#DD7694","#779649"),type = "custom",name = "Just for Test",show_text = T)

# no tilte and no color information plot
plot_palette(x = c("#99BCAC","#5F4321","#BA5140","#DD7694","#779649"),type = "custom")
```

```{r}
# object name as input,and the name given to the plot title

test_pal <- c("#C67915","#2C2F3B","#9A6655","#A72126","#446A37","#5B3222")
plot_palette(x = test_pal,type = "custom",show_text = T)

```

### ctc_palette  Modify and Customize Palttes

Function `ctc_palette` designed to get and modify the built_in palettes,and pick the color from 384 colors collection to create new palettes.

The output of the function can be the color value input for many other plot function,also worked for scale_fill(color)_ctc_c/d/m` function in this package.

 

####  Get and modify the built_in palettes

The same as `plot_palette` function, 
parameter `palette_name` accept the index number,element name,Chinese and English name for the palettes.

parametr `n` defined the number of color in your new palette,for qualitative palettes,It is strongly recommend the number DO NOT more than the number of the colors in the built_in palette.


 

```{r}
# input index number, with the color number and direction,and show_colors
ctc_palette(palette_name = 2,n = 5,direction = 1,show_colors = T)
# input the element name and the color number more than the one in the target palette
ctc_palette(palette_name = "seq02",n = 12,show_colors = T) 
```

```{r}
## example for diverging palettes 

ctc_palette(type = "built_in",palette_name = 22, n = 5, direction = 1,  show_colors = T)
ctc_palette(type = "built_in",palette_name = 22, n = 12, direction = - 1)
```

```{r}
#  example for qualitative palettes
# Can see what happened when n value more than the numbers of colors in the palette.
ctc_palette(type = "built_in",palette_name = 44, n = 12,direction = 1,show_colors = T)

ctc_palette(type = "built_in",palette_name = 44, n = 5,direction = 1,show_colors = T)
ctc_palette(type = "built_in",palette_name = 44, direction = 1,show_colors = T)
```

#### Pick up colors from 384 colors to creat palettes

Under this type, parameter `palette_name`，`n` and `direction` cannot work,and you can make a palette by input the color_pick parameter(it is a list for color information).

As a list,it maybe hard to you to input,and function `create_color_pick`, special for generate the list make it easy.
 

-   generate a diverging palette with 9 colors

```{r}
 
color_pick_1 <- create_color_pick(groups = c(11,13,12),
                                  subgroups = list(4:1,1,1:4),
                                  order_rule =1)
 
Palette_C <- ctc_palette(type = "custom",
            color_pick =color_pick_1,
            show_colors = T,
            palette_title = "gold_blue")
Palette_C
```

-   generate qualitative palettes with 6 colors

```{r}
color_pick_2 <- create_color_pick(groups = 10:15,
                                  subgroups = 3,
                                  order_rule =1)
color_pick_3 <- create_color_pick(groups = 10:15,
                                  subgroups = 4,
                                  order_rule =-1)

Palette_A <-  ctc_palette(type = "custom",
            color_pick =color_pick_2,
            show_colors = T,
            palette_title = "Palette A")
Palette_B <- ctc_palette(type = "custom",
            color_pick =color_pick_3,
            show_colors = T,
            palette_title = "Palette B")
Palette_A 
Palette_B
```

### Use the palette in ggplot

 

- discrete + fill

```{r}
ggplot(data = iris,aes(x = Species,y = Petal.Length,fill = Species))+
    geom_violin()+
    scale_fill_manual(values = ctc_palette(palette_name = 48,n = 3))
```

- use a named color vector object

```{r}
ggplot(data = iris,aes(x = Species,y = Petal.Length,fill = Species))+
    geom_violin()+
    scale_fill_manual(values = Palette_A)
```

-  discrete + color 

```{r}
ggplot(data = iris,aes(x = Sepal.Length  ,y = Sepal.Width  ,color = Species))+
    geom_point(size = 4)+
    scale_color_manual(values = ctc_palette(palette_name = 44,n = 3))
```

-   continuous + color

```{r}
ggplot(data = iris,aes(x = Species,y = Sepal.Width,color = Sepal.Width))+
    geom_point(size = 4)+
    scale_color_gradientn(colours = ctc_palette(palette_name = 9))
```

-   continuous + fill 

```{r}
 
df <- expand.grid(x = 1:20, y = 1:20)
df$z <- (df$x - 10) * (df$y - 10)   

ggplot(df, aes(x, y, fill = z)) +
  geom_tile(color = "white", size = 0.3) +   
  scale_fill_gradientn(
    colours = rev(Palette_C), # reverse the direction
    name = "Values",
  ) +
  labs(title = "Palette Test") +
  theme_minimal()
```

 
## Plot in  ggplot :Scale Functions and Ttheme Templates

### Scale Function

-   scale_fill_ctc_d :fill for discrete data

-   scale_color_ctc_d：color for discrete data

-   scale_fill_ctc_c： fill for continuous data

-   scale_color_ctc_c： color for continuous data

-   scale_fill_ctc_m： manual palette for fill,only for discrete data

-   scale_color_ctc_m：manual palette for color,only for discrete data

 `scale_color(fill)_ctc_m` function support taking custom color palettes as input; they are equivalent to the scale_fill(color)_m() function in the ggplot. Meanwhile, they support color_pick lists, which can be generated by the create_color_pick() function or manually created, serving as a dedicated input channel for custom colors selected from the 384 colors.

 

Five sets of ggplot themes, created based on elements of traditional Chinese culture, are available.
-   theme_ctc_paper() 

-   theme_ctc_dunhuang()

-   theme_ctc_bronze()

-   theme_ctc_mineral()

-   theme_ctc_ink()

some examples for these functions using in ggplot plotting.

```{r}
 iris$sepal_group <- cut(
     iris$Sepal.Length,
    breaks = 4,
   labels = paste0("组", 1:4)
 )
# in scale function ,input index number simply and use the "dunhuang" theme
 ggplot(iris, aes(x = Sepal.Width,
                       y = Petal.Width,
                       color = sepal_group)) +
    geom_point(size = 2.5) +   
   geom_smooth(method = "lm", formula = y ~x, se = FALSE) +   
     scale_color_ctc_d(palette_name = 60)+   
    theme_ctc_dunhuang() 

```

```{r}
# in scale function ,input index number simply and use the mineral theme
ggplot(mpg, aes(x = class, fill = class)) +
 geom_bar() +
 scale_fill_ctc_d(palette_name = 41)+
 theme_ctc_mineral()
```

```{r}
# in scale function ,input English name of the palette and use the paper theme
 ggplot(mtcars, aes(x = wt, y = mpg, color = hp)) +
 geom_point(size = 4) +
 scale_colour_ctc_c(palette_name = "violet_bloom", direction = -1)+
    theme_ctc_paper(base_family = "sans")
```

```{r}
 # in scale function ,input Chinese name of the palette and use the bronze theme
ggplot(faithfuld, aes(x = eruptions, y = waiting, fill = density)) +
 geom_raster() +
 scale_fill_ctc_c(palette_name = "海天沙影", direction = 1, name = "Density")+
    theme_ctc_bronze(base_family = "sans")
```

```{r}
  # in scale function ,input a custom palette and use the "dunhuang" theme
ggplot(iris, aes(Sepal.Length, Sepal.Width, fill = Species)) +
 geom_point(shape = 21, size = 3) +
 scale_fill_ctc_m(color_pick = color_pick_2) + ## use a pick_color list as a custom palette input 
theme_ctc_dunhuang(base_family = "sans")
```

```{r}
Pal_b <- Palette_B[3:5]
 
ggplot(iris, aes(Sepal.Length, Sepal.Width, fill = Species)) +
 geom_point(shape = 21, size = 4,stroke = 0.8) +
 scale_fill_ctc_m(palette = Pal_b) + ## named color vector object is available,
 theme_ctc_bronze(base_family = "sans",oxidation_level = "light")
```

```{r}
  
  my_pick <- create_color_pick(
   color_id = c(124, 324, 44),  
  order_rule = -1            
  )
 
  
 ggplot(mtcars, aes(mpg, wt, color = factor(cyl))) +
 geom_point(size = 4) +
  scale_colour_ctc_m(color_pick = my_pick) +  
 theme_ctc_mineral(base_family = "sans",base_size = 14)
```

## Issues

Issues report：https://github.com/zhiming-chen/chinacolor/issues.

Palettes contribution and suggestions for improvement and optimization is welcome!!

Gmail: zhimingc383@gmail.com
